<!DOCTYPE html>
{% load static %}
<html lang="en">

<script>
function checkRut(rut) {
    // Despejar Puntos
    var valor = rut.value.replace('.','');
    // Despejar Guión
    valor = valor.replace('-','');
    
    // Aislar Cuerpo y Dígito Verificador
    cuerpo = valor.slice(0,-1);
    dv = valor.slice(-1).toUpperCase();
    
    // Formatear RUN
    rut.value = cuerpo + '-'+ dv
    
    // Si no cumple con el mínimo ej. (n.nnn.nnn)
    if(cuerpo.length < 7) { rut.setCustomValidity("RUT Incompleto"); return false;}
    
    // Si todo sale bien, eliminar errores (decretar que es válido)
    rut.setCustomValidity('');
}
</script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="" method="POST">
    {% csrf_token %}
        <p>Ingrese rut: <input type="text" name="rut" id='rut' required oninput="checkRut(this)" placeholder="Ingrese Rut"></p>
        <input type="submit" value="Submit">
    </form>
    {% if rutvalido == "true" %}
        <h1>El rut ingresado es valido</h1>
    {% elif rutvalido == "false" %}
        <h1>El rut ingresado es invalido</h1>
    {% endif %}
    
    <form action="" method="POST">
        {% csrf_token %}
        <p>Nombres: <input type="text" name="nombres" id='nombres' placeholder="Ingrese Nombres"></p>
        <p>Apellido Paterno: <input type="text" name="ApellidoP" id='ApellidoP' placeholder="Ingrese Apellido Paterno"></p>
        <p>Apellido Materno: <input type="text" name="ApellidoM" id='ApellidoM' placeholder="Ingrese Apellido Materno"></p>
        <p>Sexo:<select id="sexo" name="sexo"><option value="M">Masculino</option><option value="F">Femenino</option></select></p>
        <input type="submit" value="Submit">
    
    </form>
    {% if saludo %}
    <h1>{{saludo}}{{nombre}}</h1>
    {% endif %}
</body>
</html>